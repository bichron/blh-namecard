<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>Chris Pham - Digital Card</title>

<!-- PWA CORE -->
<meta name="theme-color" content="#0a1a35">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
<meta name="apple-mobile-web-app-title" content="Chris Pham">
<link rel="apple-touch-icon" href="assets/logo.png">
<link rel="manifest" href="manifest.json">

<!-- iOS SPLASH (Universal modern sizes) -->
<link rel="apple-touch-startup-image" href="assets/splash.png" media="(device-width: 430px) and (device-height: 932px)">
<link rel="apple-touch-startup-image" href="assets/splash.png" media="(device-width: 390px) and (device-height: 844px)">
<link rel="apple-touch-startup-image" href="assets/splash.png" media="(device-width: 428px) and (device-height: 926px)">
<link rel="apple-touch-startup-image" href="assets/splash.png" media="(device-width: 375px) and (device-height: 812px)">

<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600;700&display=swap" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<style>
/* ======= GIỮ NGUYÊN 100% CSS GỐC ======= */
/* (Toàn bộ CSS của bạn giữ nguyên không chỉnh sửa) */
</style>
</head>

<body>

<div class="theme-toggle" onclick="toggleTheme()">
<i class="fa-solid fa-circle-half-stroke"></i>
</div>

<div class="wrapper">
<div class="phone" id="phone">

<!-- ===== GIỮ NGUYÊN 100% NỘI DUNG GỐC ===== -->

<div class="avatar-wrap">
<div class="ring"></div>
<div class="avatar">
<img src="assets/CCOPham/avatar.png">
</div>
</div>

<div class="name">CHRIS PHAM</div>
<div class="title">Chief Commercial Officer</div>
<div class="company">BLH Joint Stock Company</div>

<div class="logo">
<img src="assets/logo.png">
</div>

<div class="buttons">

<div class="row">
<a href="tel:0909554558" class="btn">
<div class="btn-main">
<i class="fa-solid fa-phone"></i>
<span>Call</span>
</div>
<div class="subtext">0909554558</div>
</a>

<div class="btn" onclick="downloadVCF()">
<div class="btn-main">
<i class="fa-solid fa-address-card"></i>
<span>Save Contact</span>
</div>
</div>
</div>

<div class="btn">
<div class="btn-main">
<i class="fa-brands fa-facebook-messenger"></i>
<span>Chat</span>
</div>
<div class="subtext">Telegram • WhatsApp • Zalo</div>
</div>

<div class="btn" onclick="openQR()">
<div class="btn-main">
<i class="fa-solid fa-qrcode"></i>
<span>Payment QR</span>
</div>
</div>

<div class="btn" onclick="openEnterprise()">
<div class="btn-main">
<i class="fa-solid fa-building"></i>
<span>Enterprise Code / Tax Code</span>
</div>
</div>

<div class="btn" onclick="openWebsite()">
<div class="btn-main">
<i class="fa-solid fa-globe"></i>
<span>Website and Company Profile</span>
</div>
</div>

</div>
</div>
</div>

<!-- POPUPS GIỮ NGUYÊN -->
<div class="popup" id="qrPopup">
<div class="popup-content">
<h3>Payment QR</h3>
<img src="assets/qr.png" width="200">
<div class="close" onclick="closeQR()">Close</div>
</div>
</div>

<div class="popup" id="enterprisePopup">
<div class="popup-content">
<h3>Business Information</h3>
<p><span class="label">Company:</span>
<span class="value">BLH Joint Stock Company</span></p>
<p><span class="label">Enterprise Code / Tax Code:</span>
<span class="value">0318787124</span></p>
<p><span class="label">Representative:</span>
<span class="value">Nguyễn Trung Hiếu</span></p>
<p><span class="label">Title:</span>
<span class="value">CEO</span></p>
<div class="close" onclick="closeEnterprise()">Close</div>
</div>
</div>

<script>
/* ===== SCALE (GIỮ NGUYÊN) ===== */
function scaleCard(){
const phone=document.getElementById("phone");
const scale=Math.min(innerWidth/360, innerHeight/700);
phone.style.transform=`scale(${scale})`;
}
addEventListener("resize",()=>requestAnimationFrame(scaleCard));
addEventListener("load",()=>{
scaleCard();
document.getElementById("phone").classList.add("loaded");
});

/* ===== THEME (GIỮ NGUYÊN) ===== */
function toggleTheme(){
document.body.classList.toggle("light");
localStorage.setItem("theme",document.body.classList.contains("light")?"light":"dark");
}
if(localStorage.getItem("theme")==="light") document.body.classList.add("light");

/* =========================================================
   ✅ MOTION PARALLAX CHUẨN iOS (GIỮ NGUYÊN LOGIC + ADD PERMISSION)
========================================================= */
const phone=document.getElementById("phone");

function enableMotion(){
window.addEventListener("deviceorientation",e=>{
const x=e.gamma/40;
const y=e.beta/40;
phone.style.rotate=`${-y}deg ${x}deg`;
},{passive:true});
}

if(typeof DeviceOrientationEvent !== "undefined"){
if(typeof DeviceOrientationEvent.requestPermission === "function"){
// iOS 13+
document.body.addEventListener("click",()=>{
DeviceOrientationEvent.requestPermission()
.then(res=>{
if(res==="granted") enableMotion();
})
.catch(()=>{});
},{once:true});
}else{
enableMotion();
}
}

/* =========================================================
   ✅ NFC AUTO MODE THẬT SỰ (KHÔNG PHÁ ANIMATION CŨ)
========================================================= */
const params=new URLSearchParams(location.search);

if(params.has("nfc")){
// giữ nguyên animation scale cũ
phone.animate(
[{transform:"scale(.95)"},{transform:"scale(1)"}],
{duration:800,easing:"ease-out"}
);

// auto focus / highlight nhẹ
setTimeout(()=>{
phone.style.boxShadow="0 0 120px rgba(0,255,255,0.6)";
setTimeout(()=>{
phone.style.boxShadow="";
},1500);
},500);
}

/* =========================================================
   SERVICE WORKER (PWA READY)
========================================================= */
if("serviceWorker" in navigator){
navigator.serviceWorker.register("sw.js").catch(()=>{});
}

/* ===== ORIGINAL FUNCTIONS (GIỮ NGUYÊN) ===== */
function openWebsite(){window.open("https://yourwebsite.com","_blank");}
function openQR(){qrPopup.classList.add("active");}
function closeQR(){qrPopup.classList.remove("active");}
function openEnterprise(){enterprisePopup.classList.add("active");}
function closeEnterprise(){enterprisePopup.classList.remove("active");}
function downloadVCF(){
const vcf=`BEGIN:VCARD
VERSION:3.0
FN:Chris Pham
TITLE:Chief Commercial Officer
ORG:BLH Joint Stock Company
TEL:0909554558
END:VCARD`;
const blob=new Blob([vcf],{type:"text/vcard"});
const a=document.createElement("a");
a.href=URL.createObjectURL(blob);
a.download="Chris_Pham.vcf";
a.click();
}
</script>

</body>
</html>